–†–∞–∑–±–∏—Ä–∞–µ–º —Ç–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ, –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω—É.

---

## üîπ Return values. Dangling pointers when returning

### üî∏ –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–º—ã

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π. –í–∏—Å—è—á–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏**

---

## 1Ô∏è‚É£ –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### üîπ –û–±—â–∞—è –∏–¥–µ—è

–§—É–Ω–∫—Ü–∏—è –≤ C++ –º–æ–∂–µ—Ç:

- **–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ**
    
- **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ** (`void`)
    

–ü—Ä–∏–º–µ—Ä:

```cpp
int square(int x) {
    return x * x;
}
```

–¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å (–∏–ª–∏ –±—ã—Ç—å –ø—Ä–∏–≤–æ–¥–∏–º—ã–º) —Å —Ç–∏–ø–æ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ.

---

## 2Ô∏è‚É£ –í–æ–∑–≤—Ä–∞—Ç –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (return by value)

### üîπ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```cpp
std::string make() {
    std::string s = "Hello";
    return s;
}
```

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è **–∫–æ–ø–∏—è** –æ–±—ä–µ–∫—Ç–∞
    
- –í C++17+ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **RVO / NRVO** ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è
    
- –≠—Ç–æ **–±–µ–∑–æ–ø–∞—Å–Ω–æ**
    

‚úî –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤

---

## 3Ô∏è‚É£ –í–æ–∑–≤—Ä–∞—Ç —É–∫–∞–∑–∞—Ç–µ–ª—è

### üîπ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä

```cpp
int* create() {
    int* p = new int(10);
    return p; // OK
}
```

- –ü–∞–º—è—Ç—å –≤ –∫—É—á–µ
    
- –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ `delete` ‚Äî —É –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –∫–æ–¥–∞
    

---

## 4Ô∏è‚É£ Dangling pointer (–≤–∏—Å—è—á–∏–π —É–∫–∞–∑–∞—Ç–µ–ª—å)

### üîπ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**Dangling pointer** ‚Äî —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ **—É–∂–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç**.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∞–∫–æ–≥–æ —É–∫–∞–∑–∞—Ç–µ–ª—è ‚Üí **–Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**.

---

## 5Ô∏è‚É£ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ

### ‚ùå –í–æ–∑–≤—Ä–∞—Ç –∞–¥—Ä–µ—Å–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

```cpp
int* bad() {
    int x = 10;
    return &x; // ‚ùå
}
```

–ü–æ—á–µ–º—É –æ—à–∏–±–∫–∞:

- `x` ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
    
- –ü–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
    
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏—Å—è—á–∏–º
    

---

### ‚ùå –í–æ–∑–≤—Ä–∞—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

```cpp
int& bad() {
    int x = 10;
    return x; // ‚ùå
}
```

---

## 6Ô∏è‚É£ –ü–æ—á–µ–º—É —ç—Ç–æ –æ–ø–∞—Å–Ω–æ

```cpp
int& p = bad();
std::cout << p; // –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
```

–ú–æ–∂–µ—Ç:

- —Ä–∞–±–æ—Ç–∞—Ç—å ¬´—Å–ª—É—á–∞–π–Ω–æ¬ª
    
- –≤—ã–¥–∞–≤–∞—Ç—å –º—É—Å–æ—Ä
    
- –ø–∞–¥–∞—Ç—å
    
- –ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    

---

## 7Ô∏è‚É£ –ö–∞–∫ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é

```cpp
int good() {
    int x = 10;
    return x;
}
```

---

### ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏

```cpp
int* good() {
    return new int(10);
}
```

‚ùó –ù—É–∂–Ω–æ `delete`.

---

### ‚úÖ –í–æ–∑–≤—Ä–∞—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç —Å –±–æ–ª—å—à–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏

```cpp
int global = 42;

int& good() {
    return global;
}
```

---

### ‚úÖ –í–æ–∑–≤—Ä–∞—Ç static local –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

```cpp
int& counter() {
    static int x = 0;
    return x;
}
```

---

## 8Ô∏è‚É£ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

### üîπ –£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏

```cpp
#include <memory>

std::unique_ptr<int> create() {
    return std::make_unique<int>(10);
}
```

‚úî –ë–µ–∑ —É—Ç–µ—á–µ–∫  
‚úî –ß—ë—Ç–∫–æ–µ –≤–ª–∞–¥–µ–Ω–∏–µ

---

### üîπ std::optional (–µ—Å–ª–∏ ¬´–º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è¬ª)

```cpp
std::optional<int> find(bool ok) {
    if (ok) return 10;
    return std::nullopt;
}
```

---

## 9Ô∏è‚É£ –í–æ–∑–≤—Ä–∞—Ç —Å—Å—ã–ª–æ–∫ ‚Äî –∫–æ–≥–¥–∞ –¥–æ–ø—É—Å—Ç–∏–º–æ

–ú–æ–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Å—ã–ª–∫—É, –µ—Å–ª–∏:

- –æ–±—ä–µ–∫—Ç –∂–∏–≤—ë—Ç –¥–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–∏
    
- —ç—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ
    
- –≤—ã–∑—ã–≤–∞—é—â–∏–π –∫–æ–¥ –ø–æ–Ω–∏–º–∞–µ—Ç –≤–ª–∞–¥–µ–Ω–∏–µ
    

‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:

- —Å—Å—ã–ª–∫–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    
- —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
    

---

## üîü –ö—Ä–∞—Ç–∫–æ –¥–ª—è —ç–∫–∑–∞–º–µ–Ω–∞

- –í–æ–∑–≤—Ä–∞—Ç –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é ‚Äî **–±–µ–∑–æ–ø–∞—Å–µ–Ω**
    
- –í–æ–∑–≤—Ä–∞—Ç —É–∫–∞–∑–∞—Ç–µ–ª—è/—Å—Å—ã–ª–∫–∏ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏
    
- **Dangling pointer** ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
    
- –í–æ–∑–≤—Ä–∞—Ç –∞–¥—Ä–µ—Å–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Äî –æ—à–∏–±–∫–∞
    
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `std::unique_ptr`, `std::optional` –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º C++
    
