–†–∞–∑–±–∏—Ä–∞–µ–º —Ç–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–æ, –≤ —ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

---

## üîπ What is std::string_view? Peculiarities

### üî∏ –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–º—ã

**–ß—Ç–æ —Ç–∞–∫–æ–µ std::string_view? –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω—é–∞–Ω—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

---

## 1Ô∏è‚É£ –ß—Ç–æ —Ç–∞–∫–æ–µ std::string_view

**`std::string_view`** ‚Äî —ç—Ç–æ **–Ω–µ–≤–ª–∞–¥–µ—é—â–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏**.

–ü—Ä–æ—â–µ:

> `std::string_view` ‚Äî —ç—Ç–æ ¬´–æ–∫–Ω–æ¬ª –Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É.

–û–Ω:

- **–Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–∏–º–≤–æ–ª—ã**
    
- **–Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–º—è—Ç—å—é**
    
- —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ:
    
    - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –Ω–∞—á–∞–ª–æ
        
    - –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏
        

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

```cpp
#include <string_view>
```

---

## 2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è

–ó–∞—á–µ–º –Ω—É–∂–µ–Ω `string_view`:

1. **–ò–∑–±–µ–∂–∞—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫**
    
2. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Å—Ç—Ä–æ–∫ –≤ —Ñ—É–Ω–∫—Ü–∏–∏**
    
3. **–†–∞–±–æ—Ç–∞ —Å –ø–æ–¥—Å—Ç—Ä–æ–∫–∞–º–∏ –±–µ–∑ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏**
    
4. **–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è:
    
    - `std::string`
        
    - —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤
        
    - C-—Å—Ç—Ä–æ–∫ (`char*`)
        

---

## 3Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```cpp
#include <iostream>
#include <string_view>

void print(std::string_view sv) {
    std::cout << sv << std::endl;
}

int main() {
    std::string s = "Hello";
    const char* c = "World";

    print(s);
    print(c);
    print("C++");
}
```

‚úî –ù–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úî –û–¥–∏–Ω —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

---

## 4Ô∏è‚É£ –ß–µ–º std::string_view –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç std::string

|–ö—Ä–∏—Ç–µ—Ä–∏–π|std::string|std::string_view|
|---|---|---|
|–í–ª–∞–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é|‚úÖ –¥–∞|‚ùå –Ω–µ—Ç|
|–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ|‚úÖ|‚ùå|
|–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å|‚úÖ|‚ùå|
|–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏|–≤—ã—Å–æ–∫–∞—è|–æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è|
|–í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏|–≤–æ–∑–º–æ–∂–Ω–æ|–Ω–∏–∫–æ–≥–¥–∞|
|–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–ª–∞–¥–µ–Ω–∏—è|–≤—ã—Å–æ–∫–∞—è|–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞|

---

## 5Ô∏è‚É£ –ü–æ–¥—Å—Ç—Ä–æ–∫–∏ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```cpp
std::string s = "Hello world";
std::string_view sv = s;

std::string_view word = sv.substr(6, 5);
std::cout << word; // world
```

‚ùó –ù–∏ –æ–¥–Ω–æ–≥–æ `new`, –Ω–∏ –æ–¥–Ω–æ–π –∫–æ–ø–∏–∏

---

## 6Ô∏è‚É£ –í–∞–∂–Ω–µ–π—à–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –í–†–ï–ú–Ø –ñ–ò–ó–ù–ò

### ‚ö†Ô∏è –ì–ª–∞–≤–Ω–∞—è –æ–ø–∞—Å–Ω–æ—Å—Ç—å

`std::string_view` **–ù–ï –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å –¥–∞–Ω–Ω—ã—Ö**, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è.

‚ùå –û—à–∏–±–∫–∞:

```cpp
std::string_view get() {
    std::string s = "Hello";
    return s; // s —É–Ω–∏—á—Ç–æ–∂–∏—Ç—Å—è!
}
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ‚Üí **–≤–∏—Å—è—á–∞—è —Å—Å—ã–ª–∫–∞**.

---

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ

```cpp
std::string s = "Hello";
std::string_view sv = s; // s –∂–∏–≤—ë—Ç –¥–æ–ª—å—à–µ sv
```

---

## 7Ô∏è‚É£ string_view –∏ '\0'

- `std::string_view` **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç `'\0'`**
    
- –ú–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø–æ–¥—Å—Ç—Ä–æ–∫—É –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏
    
- –î–ª–∏–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
    

```cpp
const char data[] = {'A','B','C','D'};
std::string_view sv(data, 3); // "ABC"
```

---

## 8Ô∏è‚É£ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å std::string_view

‚úÖ –ö–æ–≥–¥–∞:

- —Ñ—É–Ω–∫—Ü–∏—è **—Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É**
    
- –≤–∞–∂–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    
- –Ω—É–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–¥—Å—Ç—Ä–æ–∫–∞–º–∏
    
- –∏—Å—Ç–æ—á–Ω–∏–∫ —Å—Ç—Ä–æ–∫–∏ –∂–∏–≤—ë—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ
    

‚ùå –ö–æ–≥–¥–∞:

- –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É
    
- –Ω—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å
    
- –Ω—É–∂–µ–Ω –≤–ª–∞–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
    
- —Å—Ç—Ä–æ–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω–æ
    

---

## 9Ô∏è‚É£ –°–≤—è–∑—å —Å –ª–∏—Ç–µ—Ä–∞–ª–∞–º–∏ –∏ C-—Å—Ç—Ä–æ–∫–∞–º–∏

```cpp
std::string_view a = "Hello"; // OK
std::string_view b = std::string("Hi"); // ‚ùå –æ–ø–∞—Å–Ω–æ, –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
```

‚ö†Ô∏è –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–∑–¥–∞—ë—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π `std::string`, –∫–æ—Ç–æ—Ä—ã–π —Ç—É—Ç –∂–µ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è.

---

## üîü –ö—Ä–∞—Ç–∫–æ –¥–ª—è —ç–∫–∑–∞–º–µ–Ω–∞

- `std::string_view` ‚Äî **–Ω–µ–≤–ª–∞–¥–µ—é—â–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏**
    
- –ù–µ –∫–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
    
- –•—Ä–∞–Ω–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å + –¥–ª–∏–Ω—É
    
- –û—á–µ–Ω—å –¥–µ—à—ë–≤—ã–π –≤ –ø–µ—Ä–µ–¥–∞—á–µ
    
- **–û–ø–∞—Å–µ–Ω –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏**
    
- –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π ¬´—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è¬ª
    
